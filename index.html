<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <title>Home | Bristol Farms</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Place favicon.ico in the root directory -->
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,600|Raleway:400,600,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons&display=block" rel="stylesheet">
  <link href="./css/vendor/fontawesome.css" rel="stylesheet">
  <link rel="stylesheet" href="./css/vendor/datepicker.min.css">
  <link rel="stylesheet" href="./css/vendor/materialize.min.css">
  <link rel="stylesheet" href="css/styles.css">

  <meta name="theme-color" content="#fafafa">
</head>

<body class="left-menu-fixed">

  <div class="body-container-wrapper">
    <div class="body-wrapper">

      <!-- Header -->
      <header class="header-container">
        <div class="header-container-wrapper">
          <div class="container-fluid">
            <div class="row">
              <div class="col-sm-10 header-left-wrapper">
                <div class="cell-wrapper">
                  <div class="header-title-nav-wrapper">
                    <div class="title">
                      <h3>Home</h3>
                      <div aria-label="breadcrumb">
                        <ol class="breadcrumb">
                          <li class="breadcrumb-item active" aria-current="page">Home</li>
                        </ol>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-2 header-right-wrapper text-right">
                <div class="cell-wrapper">
                  <div id="headerDropdownMenu"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>

      <!-- Left Menu -->
      <div class="left-menu-wrapper"></div>

      <!-- Main Body Content -->
      <div class="main-body-content-wrapper">
        <div class="main-body-content-container">

          <div class="main-body-data-wrapper">
            <div class="container-fluid">
              <div class="row">
                <div class="col-md-6">
                  <div class="cell-wrapper">
                    <div class="card">
                      <div class="card-content">
                        <div class="card-header">
                          <div class="card-title-wrapper">
                            <h3 class="card-title mb-0">
                              Pending Allowances
                            </h3>
                          </div>
                        </div>
                        <div class="datatable-wrapper datatable-2-col">
                          <div id="pendingAllowancesDatatable" class="datatable ag-theme-material"></div>
                          <div class="datatable-action-item-select">
                            <div class="d-flex flex-row justify-content-center align-items-center">
                              <span class="page-size-label">Items to Show</span>
                              <select data-table="pendingAllowancesDatatableGridData" class="itemDropdownSelect">
                                <option value="10">10</option>
                                <option value="20">20</option>
                                <option value="50">50</option>
                              </select>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="cell-wrapper">
                    <div class="card">
                      <div class="card-content">
                        <div class="card-header">
                          <div class="card-title-wrapper">
                            <h3 class="card-title mb-0">
                              Pending Bills
                            </h3>
                          </div>
                        </div>
                        <div class="datatable-wrapper  datatable-2-col">
                          <div id="vendorBillingDatatable" class="datatable ag-theme-material"></div>
                          <div class="datatable-action-item-select">
                            <div class="d-flex flex-row justify-content-center align-items-center">
                              <span class="page-size-label">Items to Show</span>
                              <select data-table="vendorBillingDatatableGridData" class="itemDropdownSelect">
                                <option value="10">10</option>
                                <option value="20">20</option>
                                <option value="50">50</option>
                              </select>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-sm-12">
                  <div class="cell-wrapper">
                    <div class="card">
                      <div class="card-content">
                        <div class="card-header">
                          <div class="card-title-wrapper">
                            <h3 class="card-title mb-0">
                              Ads Pending for Approval
                            </h3>
                          </div>
                        </div>
                        <div class="datatable-wrapper">
                          <div id="adsPendingApprovalDatatable" class="datatable ag-theme-material"></div>
                          <div class="datatable-action-item-select">
                            <div class="d-flex flex-row justify-content-end align-items-center">
                              <span class="page-size-label">Items to Show</span>
                              <select data-table="adsPendingApprovalDatatableGridData" class="itemDropdownSelect">
                                <option value="10">10</option>
                                <option value="20">20</option>
                                <option value="50">50</option>
                              </select>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
    </div>
  </div>


  <script src="js/vendor/modernizr-3.8.0.min.js"></script>
  <script src="js/vendor/jquery-3.4.1.min.js"></script>
  <script src="js/vendor/ag-grid-enterprise.min.js"></script>
  <script src="js/vendor/materialize.min.js"></script>
  <script src="js/vendor/datepicker.min.js"></script>
  <script src="js/vendor/datepicker.en.js"></script>


  <script src="js/main.js"></script>

<script>

  var adsPendingApprovalDatatableColumnDefs = [
    {headerName: "Ad Name", field: "ad", cellRenderer: 'linking'},
    {headerName: "Department", field: "department"},
    {headerName: "Start Date", field: "start_date"},
    {headerName: "End Date", field: "end_date"},
  ], 
  pendingAllowancesDatatableColumnDefs = [
    {headerName: "Deal Name", field: "pendingAllowancesDealName", cellRenderer: 'linking'},
    {headerName: "Submission Date", field: "pendingAllowancesSubmissionDate"},
  ],
  vendorBillingDatatableColumnDefs = [
    {headerName: "UPC", field: "upc", cellRenderer: 'linking'},
    {headerName: "Bill To", field: "bill_to"},
    {headerName: "Start Date", field: "start_date"},
    {headerName: "End Date", field: "end_date"},
  ],
  emptyData = [];

  var adsPendingApprovalDatatableGridData = {
    defaultColDef: {
      resizable: true,
      sortable:true,
      filter: true
    },
    columnDefs: adsPendingApprovalDatatableColumnDefs,
    rowData: emptyData,
    pagination: true,
    paginationPageSize: 10,
    paginationNumberFormatter: function(params) {
      return '' + params.value.toLocaleString() + '';
    },
    onGridReady: function(params) {
      params.api.sizeColumnsToFit();
    },
    components: {
      'linking': Linking
    },
  };

  var adsPendingApprovalDatatableDiv = document.querySelector('#adsPendingApprovalDatatable');
  new agGrid.Grid(adsPendingApprovalDatatableDiv, adsPendingApprovalDatatableGridData); 

  var pendingAllowancesDatatableGridData = {
    defaultColDef: {
      resizable: true,
      sortable:true,
      filter: true
    },
    columnDefs: pendingAllowancesDatatableColumnDefs,
    rowData: emptyData,
    pagination: true,
    paginationPageSize: 10,
    paginationNumberFormatter: function(params) {
      return '' + params.value.toLocaleString() + '';
    },
    onGridReady: function(params) {
      params.api.sizeColumnsToFit();
    },
    components: {
      'linking': Linking
    },
  };
  
  var pendingAllowancesDatatableDiv = document.querySelector('#pendingAllowancesDatatable');
  new agGrid.Grid(pendingAllowancesDatatableDiv, pendingAllowancesDatatableGridData); 

  var vendorBillingDatatableGridData = {
    defaultColDef: {
      resizable: true,
      sortable:true,
      filter: true
    },
    columnDefs: vendorBillingDatatableColumnDefs,
    rowData: emptyData,
    pagination: true,
    paginationPageSize: 10,
    paginationNumberFormatter: function(params) {
      return '' + params.value.toLocaleString() + '';
    },
    onGridReady: function(params) {
      // params.api.sizeColumnsToFit();
    },
    components: {
      'linking': Linking
    },
  };
  
  var vendorBillingDatatableDiv = document.querySelector('#vendorBillingDatatable');
  new agGrid.Grid(vendorBillingDatatableDiv, vendorBillingDatatableGridData); 

$.get("data/home.json", function(data, status){
  adsPendingApprovalDatatableGridData.api.setRowData(data);
  pendingAllowancesDatatableGridData.api.setRowData(data);
  vendorBillingDatatableGridData.api.setRowData(data);
  
  pendingAllowancesDatatableGridData.api.sizeColumnsToFit();
  adsPendingApprovalDatatableGridData.api.sizeColumnsToFit();
});

function Linking() {}

// init method gets the details of the cell to be rendere
Linking.prototype.init = function(params) {
  this.eGui = document.createElement('div');
  if(params.colDef.headerName === 'Ad Name') {
    this.eGui.innerHTML = '<a href="/add-promo-item-data.html" title="">' + params.value + '</a>';
  } else if(params.colDef.headerName === 'Deal Name') {
    this.eGui.innerHTML = '<a href="/pending-deals.html" title="">' + params.value + '</a>';
  } else if(params.colDef.headerName === 'UPC') {
    this.eGui.innerHTML = '<a href="/pending-billing.html" title="">' + params.value + '</a>';
  }
};

Linking.prototype.getGui = function() {
    return this.eGui;
};


$('body').on('change', '.itemDropdownSelect', function(event) {
    event.preventDefault();
    eval($(this).attr('data-table')).api.paginationSetPageSize(Number($(this).val()));
}); 

$(window).on("load resize",function(e){
  pendingAllowancesDatatableGridData.api.sizeColumnsToFit();
  adsPendingApprovalDatatableGridData.api.sizeColumnsToFit();
});

</script>

  <!-- Google Analytics: change UA-XXXXX-Y to be your site's ID. -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-XXXXX-Y', 'auto'); ga('set','transport','beacon'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async></script>
</body>

</html>